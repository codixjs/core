<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>指南 | CodixJS</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Node Private Package Manager">
    
    <link rel="preload" href="/assets/css/0.styles.ff9b19b5.css" as="style"><link rel="preload" href="/assets/js/app.8c51637a.js" as="script"><link rel="preload" href="/assets/js/2.a252a534.js" as="script"><link rel="preload" href="/assets/js/9.9e99ef1f.js" as="script"><link rel="prefetch" href="/assets/js/3.89524b3f.js"><link rel="prefetch" href="/assets/js/4.3a7e367f.js"><link rel="prefetch" href="/assets/js/5.e80758e0.js"><link rel="prefetch" href="/assets/js/6.8b5c59a7.js"><link rel="prefetch" href="/assets/js/7.00d9e1cb.js"><link rel="prefetch" href="/assets/js/8.741c7d81.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ff9b19b5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">CodixJS</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/guide.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  指南
</a></div><div class="nav-item"><a href="/api.html" class="nav-link">
  API
</a></div> <a href="https://github.com/codixjs/core" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/guide.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  指南
</a></div><div class="nav-item"><a href="/api.html" class="nav-link">
  API
</a></div> <a href="https://github.com/codixjs/core" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide.html#工作原理" class="sidebar-link">工作原理</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/guide.html#快速上手" class="sidebar-link">快速上手</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/guide.html#模块介绍" class="sidebar-link">模块介绍</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/guide.html#项目目录" class="sidebar-link">项目目录</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/guide.html#项目配置" class="sidebar-link">项目配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide.html#entries" class="sidebar-link">entries</a></li><li class="sidebar-sub-header"><a href="/guide.html#skips" class="sidebar-link">skips</a></li><li class="sidebar-sub-header"><a href="/guide.html#rewrites" class="sidebar-link">rewrites</a></li><li class="sidebar-sub-header"><a href="/guide.html#templatestates" class="sidebar-link">templateStates</a></li></ul></li><li><a href="/guide.html#创建新的页面及路由" class="sidebar-link">创建新的页面及路由</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/guide.html#使用无差别的异步数据流" class="sidebar-link">使用无差别的异步数据流</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/guide.html#页面级跳转方式" class="sidebar-link">页面级跳转方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide.html#redirect" class="sidebar-link">redirect</a></li><li class="sidebar-sub-header"><a href="/guide.html#replace" class="sidebar-link">replace</a></li><li class="sidebar-sub-header"><a href="/guide.html#path-redirect" class="sidebar-link">Path.redirect</a></li><li class="sidebar-sub-header"><a href="/guide.html#path-replace" class="sidebar-link">Path.replace</a></li><li class="sidebar-sub-header"><a href="/guide.html#redirectrouter" class="sidebar-link">redirectRouter</a></li><li class="sidebar-sub-header"><a href="/guide.html#replacerouter" class="sidebar-link">replaceRouter</a></li><li class="sidebar-sub-header"><a href="/guide.html#hook-usepath" class="sidebar-link">hook: usePath</a></li></ul></li><li><a href="/guide.html#自定义ssr内容输出" class="sidebar-link">自定义SSR内容输出</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide.html#解析tassets资源数据" class="sidebar-link">解析TAssets资源数据</a></li><li class="sidebar-sub-header"><a href="/guide.html#客户端资源中间件" class="sidebar-link">客户端资源中间件</a></li><li class="sidebar-sub-header"><a href="/guide.html#使用代理中间件" class="sidebar-link">使用代理中间件</a></li><li class="sidebar-sub-header"><a href="/guide.html#输出文本内容" class="sidebar-link">输出文本内容</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="指南"><a href="#指南" class="header-anchor">#</a> 指南</h1> <p>它是一套基于<code>React@18.x</code>的前端开发架构，能够快速生成<code>SPA</code>与<code>SSR</code>项目代码。
同时它支持<code>Render-as-You-Fetch</code>的异步数据渲染方式，通过<code>React@18.x</code>的<code>renderToPipeableStream</code>方式渲染出页面流数据。
它也是目前唯一一套基于<code>React@18.x</code>的SSR完整解决方案。</p> <h2 id="工作原理"><a href="#工作原理" class="header-anchor">#</a> 工作原理</h2> <p>它不改变任何<code>React</code>的编写和启动方式。它的职责是生成一个用于启动的组件提供给<code>React</code>用于启动页面。
这使得本架构可以兼容很多<code>React</code>支持的其他框架，用户不必要担心兼容性的问题。
当然，本架构遵循<code>React</code>的默认推荐的组件方式，即函数组件。</p> <div class="language-ts line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><div class="highlighted"> </div><br></div><pre class="language-ts"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> createNewRouters <span class="token keyword">from</span> <span class="token string">'../index'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Application<span class="token punctuation">,</span> PopstateHistoryMode <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@codixjs/codix'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRoot <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Application</span><span class="token punctuation">(</span>PopstateHistoryMode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> routers <span class="token operator">=</span> <span class="token function">createNewRouters</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> Bootstrap <span class="token punctuation">}</span> <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> react <span class="token operator">=</span> <span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

react<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Bootstrap pathes<span class="token operator">=</span><span class="token punctuation">{</span>routers<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token number">404</span> Not Found<span class="token operator">&lt;</span><span class="token operator">/</span>Bootstrap<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="快速上手"><a href="#快速上手" class="header-anchor">#</a> 快速上手</h2> <p>它支持<code>npm create</code>命令来快速创建项目。</p> <blockquote><p>注意：项目完全采用<code>TypeScript</code>开发方式，普通<code>JavaScript</code>方式不推荐，所以项目创建完毕是基于<code>TS</code>语法的。</p></blockquote> <ol><li>创建并进入一个新目录</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">npm</span> create codix-app <span class="token operator">&lt;</span>project name<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>进入项目</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> <span class="token operator">&lt;</span>project name<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="3"><li>安装依赖</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">npm</span> i
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="4"><li>启动开发</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">npm</span> run dev <span class="token comment"># 启动spa开发模式</span>
$ <span class="token function">npm</span> run dev:ssr <span class="token comment"># 启动ssr开发模式</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="5"><li>编译项目</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">npm</span> run build:spa <span class="token comment"># 启动spa编译</span>
$ <span class="token function">npm</span> run build:client <span class="token comment"># 启动ssr的client端编译</span>
$ <span class="token function">npm</span> run build:server <span class="token comment"># 启动ssr的server端编译</span>
$ <span class="token function">npm</span> run build <span class="token comment"># 启动聚合编译 将所有模式都生成产物</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="6"><li>SSR产物启动</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">node</span> server.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>或者需要使用<code>PM2</code>启动的：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ pm2 start server.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>现在你已经完整体验了整个项目开发流程。你会发现我们使用的是<code>Vite</code>来开发项目，而非<code>Webpack</code>。
主要的考虑是<code>Vite</code>目前对<code>React</code>开发的支持度非常不错，也是下一代开发工具。<code>Vite</code>的优势可以看官网介绍。</p> <h2 id="模块介绍"><a href="#模块介绍" class="header-anchor">#</a> 模块介绍</h2> <p>官方提供的架构模块如下：</p> <ul><li><a href="https://github.com/codixjs/core/tree/master/packages/codix" target="_blank" rel="noopener noreferrer">@codixjs/codix<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 核心框架代码</li> <li><a href="https://github.com/codixjs/core/tree/master/packages/router" target="_blank" rel="noopener noreferrer">@codixjs/router<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 路由管理控制模块</li> <li><a href="https://github.com/codixjs/core/tree/master/packages/fetch" target="_blank" rel="noopener noreferrer">@codixjs/fetch<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 支持<code>SPA</code>与<code>SSR</code>无差异的异步数据渲染模块</li> <li><a href="https://github.com/codixjs/core/tree/master/packages/server" target="_blank" rel="noopener noreferrer">@codixjs/server<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 服务端渲染核心代码</li> <li><a href="https://github.com/codixjs/core/tree/master/packages/vite" target="_blank" rel="noopener noreferrer">@codixjs/vite<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <code>Vite</code>的开发及编译插件兼容模块</li></ul> <h2 id="项目目录"><a href="#项目目录" class="header-anchor">#</a> 项目目录</h2> <pre class="vue-container"><code><p>.
├── src
│   ├── entries <em>(<strong>入口文件集合</strong>)</em>
│   │   ├── <code>client.tsx</code> <em>(<strong>SSR的Client端启动文件</strong>)</em>
│   │   ├── <code>server.tsx</code> <em>(<strong>SSR的server端导出模块文件</strong>)</em>
│   │   └── <code>spa.js</code> <em>(<strong>SPA启动文件</strong>)</em>
│   ├── pages
│   │   ├── <code>index</code> <em>(<strong>首页路由文件夹</strong>)</em>
│   │   │   ├── index.module.less <em>(<strong>样式文件</strong>)</em>
│   │   │   └── index.tsx <em>(<strong>组件文件</strong>)</em>
│   │   └── <code>...</code> <em>(<strong>更多路由文件夹</strong>)</em>
│   ├── <code>hooks.ts</code> <em>(<strong>通用HOOKS集合</strong>)</em>
│   ├── <code>html.tsx</code> <em>(<strong>项目模板文件，基于React组件渲染导出</strong>)</em>
│   ├── <code>index.ts</code> <em>(<strong>路由聚合文件</strong>)</em>
│   ├── style.less
│   └── <code>vite-env.d.ts</code> <em>(<strong>TS全局类型定义文件</strong>)</em>
├── .gitignore
├── favicon.svg
├── index.html
├── package.json
├── README.md
├── <code>server.js</code> <em>(<strong>生成环境SSR启动入口文件</strong>)</em>
├── tsconfig.json
├── tsconfig.node.json
└── vite.config.ts</p>
</code></pre><p>一般的，我们将业务代码都是放到<code>pages</code>下面的，每个路由都新建一个文件夹来处理，每个文件夹导出一个页面级组件。</p> <ul><li><code>/src/entries/*</code> 文件夹内容不要改动</li> <li><code>/src/hooks.ts</code> 文件一般不需要改动，直接调用已封装的函数即可。</li> <li><code>/src/html.tsx</code> 文件一般不需要改动，除非需要在输出的HTML加上自定义内容。</li> <li><code>/src/index.ts</code> 在<code>pages</code>下所有的路由组件都需要在这个文件内<code>import</code>进来后定义路由，同时对这个文件导出结果进行追加。</li></ul> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>如果没有特殊的需求，尽量不要改动项目的目录结构。
如果非要改动结构，请参考<code>package.json</code>的<code>config</code>字段进行相应改动。</p></div> <h2 id="项目配置"><a href="#项目配置" class="header-anchor">#</a> 项目配置</h2> <p>项目的配置参数在<code>package.json</code>的<code>config</code>字段中定义，它的类型如下：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">TConfigs<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">unknown</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  entries<span class="token operator">:</span> <span class="token punctuation">{</span>
    spa<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    client<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    server<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  skips<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  rewrites<span class="token operator">?</span><span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  templateStates<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="entries"><a href="#entries" class="header-anchor">#</a> entries</h3> <p>各端的入口文件路径配置地址。</p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>基址都基于本项目路径。</p></div> <ul><li><code>spa</code> 基于<code>SPA</code>模式下的入口文件</li> <li><code>client</code> 基于<code>SSR</code>模式下的<code>client</code>端入口文件</li> <li><code>server</code> 基于<code>SSR</code>模式下的<code>server</code>端入口文件</li></ul> <h3 id="skips"><a href="#skips" class="header-anchor">#</a> skips</h3> <p>在SSR模式下，需要不处理的URL路径。在开发模式下，以下的路径是不需要我们来处理的，由<code>Vite</code>自动处理，所以我们需要跳过。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token string-property property">&quot;skips&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;/@react-refresh&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;/@id/vite/modulepreload-polyfill&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;/@vite/client&quot;</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>当然你也可以添加一些自己认为不需要处理的路径。</p> <h3 id="rewrites"><a href="#rewrites" class="header-anchor">#</a> rewrites</h3> <p>在SSR模式下，需要重写的URL路径规则。一般的，如果在收到<code>/index.html</code>的时候，意味着获取<code>/</code>路由，你需要在这里配置：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token string-property property">&quot;rewrites&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;/index.html&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果有其他需要重写的路由，也在这里配置。</p> <h3 id="templatestates"><a href="#templatestates" class="header-anchor">#</a> templateStates</h3> <p>在任何模式下，生成HTML页面内容的时候都是基于<code>src/html.tsx</code>来生成的。
我们可以提供这里的一些额外的数据参数供渲染。</p> <p>HTML组件内容如下</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Scripts<span class="token punctuation">,</span> PreLoads<span class="token punctuation">,</span> Css<span class="token punctuation">,</span> THtmlProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@codixjs/server'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token constant">HTML</span><span class="token punctuation">(</span>props<span class="token operator">:</span> React<span class="token punctuation">.</span>PropsWithChildren<span class="token operator">&lt;</span>THtmlProps<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charSet</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image/svg+xml<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/favicon.svg<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Vite App</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Scripts</span></span> <span class="token attr-name">dataSource</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>assets<span class="token punctuation">.</span>headerScripts<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PreLoads</span></span> <span class="token attr-name">dataSource</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>assets<span class="token punctuation">.</span>headerPreloadScripts<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Css</span></span> <span class="token attr-name">dataSource</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>assets<span class="token punctuation">.</span>headerCsses<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Scripts</span></span> <span class="token attr-name">dataSource</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>assets<span class="token punctuation">.</span>bodyScripts<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>那么<code>THtmlProps&lt;T&gt;</code>中的<code>T</code>即为<code>templateStates</code>的数据。</p> <h2 id="创建新的页面及路由"><a href="#创建新的页面及路由" class="header-anchor">#</a> 创建新的页面及路由</h2> <p>我们需要根据以下步骤来创建：</p> <ol><li>创建页面文件夹。文件夹都存放在<code>/src/pages</code>目录下。比如我们创建一个<code>welcome</code>页面，那么我们就创建以下的文件</li></ol> <ul><li><code>/src/pages/welcome/index.tsx</code> 组件内容</li> <li><code>/src/pages/welcome/index.module.less</code> 组件样式</li></ul> <blockquote><p>一般的，组件和样式是同名处理，只是添加的后缀不一样。</p></blockquote> <ul><li><em>/src/pages/welcome/index.tsx</em></li></ul> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">'./index.module.less'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Welcome</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>bg<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Welcome, every one!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><em>/src/pages/welcome/index.module.less</em></li></ul> <div class="language-less line-numbers-mode"><pre class="language-less"><code><span class="token selector">.bg</span><span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #f8f8f8<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="2"><li>需要将此组件注册到系统内部。注册文件为<code>/src/index.ts</code>:</li></ol> <div class="language-ts line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Application<span class="token punctuation">,</span> HistoryMode<span class="token punctuation">,</span> withImport <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@codixjs/codix'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Client<span class="token punctuation">,</span> ClientProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@codixjs/fetch'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span>app<span class="token operator">:</span> Application<span class="token operator">&lt;</span>HistoryMode<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Client</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span><span class="token constant">INITIALIZE_STATE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    client<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token constant">INITIALIZE_STATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ClientProvider<span class="token punctuation">,</span> <span class="token punctuation">{</span> client <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> welcome <span class="token operator">=</span> <span class="token function">app</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'/welcome'</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token function">withImport</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./pages/welcome'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> fallback<span class="token operator">:</span> <span class="token string">'loading...'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    welcome<span class="token punctuation">,</span>
    client<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>以上使用了动态<code>import</code>方式导入，我们也可以使用常规的导入方式：</p> <div class="language-ts line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Application<span class="token punctuation">,</span> HistoryMode<span class="token punctuation">,</span> withImport <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@codixjs/codix'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Client<span class="token punctuation">,</span> ClientProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@codixjs/fetch'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> WelcomePage <span class="token keyword">from</span> <span class="token string">'./pages/welcome'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span>app<span class="token operator">:</span> Application<span class="token operator">&lt;</span>HistoryMode<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Client</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span><span class="token constant">INITIALIZE_STATE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    client<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token constant">INITIALIZE_STATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ClientProvider<span class="token punctuation">,</span> <span class="token punctuation">{</span> client <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> welcome <span class="token operator">=</span> <span class="token function">app</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'/welcome'</span><span class="token punctuation">,</span> WelcomePage<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    welcome<span class="token punctuation">,</span>
    client<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">恭喜你</p> <p>只需要简单的两步，我们就已经将路由绑定了。是不是很简单？</p></div> <h2 id="使用无差别的异步数据流"><a href="#使用无差别的异步数据流" class="header-anchor">#</a> 使用无差别的异步数据流</h2> <p>系统提供了基于<code>Render-as-You-Fetch</code>方式的兼容<code>SPA</code>与<code>SSR</code>的异步数据流获取方式，需要使用到的是<code>@codixjs/fetch</code>库来支持。</p> <div class="language-tsx line-numbers-mode"><div class="highlight-lines"><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useAsync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@codixjs/fetch'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Welcome</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> success<span class="token punctuation">,</span> error<span class="token punctuation">,</span> execute<span class="token punctuation">,</span> loading <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useAsync</span><span class="token punctuation">(</span><span class="token string">'custom-id'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        a<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>bg<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Welcome, now Timestamp is </span><span class="token punctuation">{</span>
      loading
        <span class="token operator">?</span> <span class="token string">'load'</span>
        <span class="token operator">:</span> success
        <span class="token operator">?</span> data<span class="token punctuation">.</span>a
        <span class="token operator">:</span> error<span class="token punctuation">.</span>message
    <span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><p><code>useAsync</code>的回调内容，可以是任意的异步处理得到的结果，比如<code>ajax</code>获取等等...</p></blockquote> <p>这种数据获取方式也是被<code>React</code>官方推崇的方式。请大家尽量使用这种方式来获取数据。
至于在<code>useEffect</code>内获取数据的方式，这里不推荐。</p> <h2 id="页面级跳转方式"><a href="#页面级跳转方式" class="header-anchor">#</a> 页面级跳转方式</h2> <p>不论是<code>hashchange</code>模式还是<code>popstate</code>模式，系统做了统一的处理，包括<code>SSR</code>模式下的<code>301</code>和<code>302</code>跳转兼容。</p> <p><code>redirect</code> 与 <code>replace</code> 的区别在于：</p> <ul><li><code>redirect</code> 向浏览器历史堆栈种添加一条记录。</li> <li><code>replace</code> 将当前浏览器的堆栈的当前节点替换。</li></ul> <p>接下来，一起看下具体的使用方式。</p> <h3 id="redirect"><a href="#redirect" class="header-anchor">#</a> redirect</h3> <p>系统提供的最底层的调用方式。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> redirect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@codixjs/codix'</span><span class="token punctuation">;</span>
<span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">'/project?id=2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="replace"><a href="#replace" class="header-anchor">#</a> replace</h3> <p>系统提供的最底层的调用方式。</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> replace <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@codixjs/codix'</span><span class="token punctuation">;</span>
<span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'/project?id=2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="path-redirect"><a href="#path-redirect" class="header-anchor">#</a> Path.redirect</h3> <p>通过具体的路由对象进行跳转。
在<code>/src/index.ts</code>种定义了很多路由，比如有如下的定义：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">const</span> project <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">bind</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">'/project/:id(\\d+)'</span><span class="token punctuation">,</span> Component<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>那么我们就可以通过以下的方式进行跳转</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>project<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="path-replace"><a href="#path-replace" class="header-anchor">#</a> Path.replace</h3> <p>通过具体的路由对象进行跳转。
在<code>/src/index.ts</code>种定义了很多路由，比如有如下的定义：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">const</span> project <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">bind</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">'/project/:id(\\d+)'</span><span class="token punctuation">,</span> Component<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>那么我们就可以通过以下的方式进行跳转</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>project<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="redirectrouter"><a href="#redirectrouter" class="header-anchor">#</a> redirectRouter</h3> <p>同多确定<code>Path</code>路由的方式进行跳转。
在<code>/src/index.ts</code>种定义了很多路由，比如有如下的定义：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">const</span> project <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">bind</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">'/project/:id(\\d+)'</span><span class="token punctuation">,</span> Component<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>那么我们就可以通过以下的方式进行跳转</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> redirectRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@codixjs/codix'</span><span class="token punctuation">;</span>
<span class="token function">redirectRouter</span><span class="token punctuation">(</span>project<span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="replacerouter"><a href="#replacerouter" class="header-anchor">#</a> replaceRouter</h3> <p>同多确定<code>Path</code>路由的方式进行跳转。
在<code>/src/index.ts</code>种定义了很多路由，比如有如下的定义：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">const</span> project <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">bind</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">'/project/:id(\\d+)'</span><span class="token punctuation">,</span> Component<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>那么我们就可以通过以下的方式进行跳转</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> replaceRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@codixjs/codix'</span><span class="token punctuation">;</span>
<span class="token function">replaceRouter</span><span class="token punctuation">(</span>project<span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="hook-usepath"><a href="#hook-usepath" class="header-anchor">#</a> hook: usePath</h3> <p>通过一个统一的hooks集合进行选择性跳转。
在<code>/src/entries/spa.tsx</code>与<code>/src/entries/client.tsx</code>中都注入了<code>pathes</code>数据：</p> <div class="language-tsx line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br></div><pre class="language-tsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> createNewRouters <span class="token keyword">from</span> <span class="token string">'../index'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Application<span class="token punctuation">,</span> PopstateHistoryMode <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@codixjs/codix'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRoot <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Application</span><span class="token punctuation">(</span>PopstateHistoryMode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> routers <span class="token operator">=</span> <span class="token function">createNewRouters</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> Bootstrap <span class="token punctuation">}</span> <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> react <span class="token operator">=</span> <span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

react<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Bootstrap</span></span> <span class="token attr-name">pathes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>routers<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">404 Not Found</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Bootstrap</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>那么久可以通过hooks进行选择性跳转。</p> <div class="language-tsx line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> usePath <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'/src/hooks'</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Welcome</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">usePath</span><span class="token punctuation">(</span><span class="token string">'project'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> path<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onclick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Jump page to other!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="自定义ssr内容输出"><a href="#自定义ssr内容输出" class="header-anchor">#</a> 自定义SSR内容输出</h2> <p><code>/src/entries/server.ts</code> 的服务端渲染入口导出的是一个http的中间件。所以，用户可以将此中间件用于任何中间件的服务中，类似<code>express</code>与<code>koa</code>。
但是在输出HTML内容之前需要用户自己实现4个流程：</p> <ol><li>将<code>client</code>端的<code>manifest</code>资源解析出<code>TAssets</code>类型。</li> <li>将<code>client</code>端的静态资源，通过静态资源中间件导出。</li> <li>使用<a href="https://www.npmjs.com/package/http-proxy-middleware" target="_blank" rel="noopener noreferrer">http-proxy-middleware<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>来实现客户端请求的代理。</li> <li>将静态资源写入到<code>req.HTMLAssets</code>中。</li> <li>使用<code>/src/entries/server.ts</code>导入到服务中将内容输出。</li></ol> <blockquote><p>具体代码可以参考项目的<code>server.js</code>文件</p></blockquote> <h3 id="解析tassets资源数据"><a href="#解析tassets资源数据" class="header-anchor">#</a> 解析TAssets资源数据</h3> <div class="language-ts line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br></div><pre class="language-ts"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> getAssets <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@codixjs/vite'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> clientDictionary <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token string">'ssr'</span><span class="token punctuation">,</span> <span class="token string">'client'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> assets<span class="token operator">:</span> TAssets <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getAssets</span><span class="token punctuation">(</span><span class="token string">'src/entries/client.tsx'</span><span class="token punctuation">,</span> clientDictionary<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>注意: 在没修改任何项目配置的时候， <code>src/entries/client.tsx</code> 是固定的，否则需要用户自己确定这个入口文件。</p></blockquote> <h3 id="客户端资源中间件"><a href="#客户端资源中间件" class="header-anchor">#</a> 客户端资源中间件</h3> <div class="language-ts line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br></div><pre class="language-ts"><code><span class="token keyword">const</span> serveStatic <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'serve-static'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">serveStatic</span><span class="token punctuation">(</span>clientDictionary<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="使用代理中间件"><a href="#使用代理中间件" class="header-anchor">#</a> 使用代理中间件</h3> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> createProxyMiddleware <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'http-proxy-middleware'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  target<span class="token operator">:</span> <span class="token string">'https://api.china.cn'</span><span class="token punctuation">,</span>
  changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="输出文本内容"><a href="#输出文本内容" class="header-anchor">#</a> 输出文本内容</h3> <div class="language-ts line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-ts"><code><span class="token keyword">const</span> render <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./dist/ssr/server/server.mjs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> runner <span class="token operator">=</span> render<span class="token punctuation">.</span>default<span class="token punctuation">.</span>middleware<span class="token punctuation">;</span>
<span class="token comment">// ...</span>
app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  req<span class="token punctuation">.</span>HTMLAssets <span class="token operator">=</span> assets<span class="token punctuation">;</span>
  req<span class="token punctuation">.</span>HTMLStates <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">runner</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/codixjs/core/edit/master/documents/guide.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/api.html">
        API
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8c51637a.js" defer></script><script src="/assets/js/2.a252a534.js" defer></script><script src="/assets/js/9.9e99ef1f.js" defer></script>
  </body>
</html>
